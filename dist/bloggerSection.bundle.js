/*!
* blogger.section 0.1.0
* https://github.com/Karasu-themes/bloggerSection
*
* Copyright Â© 2022 MarceloTLD
* 
* Released under the MIT License
*-----------------------------------------------*/
(function(f,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(f=typeof globalThis<"u"?globalThis:f||self,f.bloggerSection=d())})(this,function(){"use strict";function f(e,t){const o=(s,l)=>{e(s,l)};return new IntersectionObserver(o,t||{threshold:.3})}function d(e){const t={},o=/[\$\w+\{.+\}\,\:\/\.\-]{1,}/g;return e.match(o).forEach(n=>{const s=n.match(/\$\w+/g)[0].replace(/\$/g,""),l=n.match(/\{[a-z-A-Z-0-9-\.-\:-\,]{1,}/g)[0].replace(/\}|\{/g,""),i={};i[s]=l,Object.assign(t,{...i})}),t}function p(e,t){function o(s,l){if(!Array.isArray(l))return s;const i=/{for(\.\w+)\s+(.+)\s+\/for}/g;let a="";if(i.test(s)){const c=s.match(i)[0].replace(/{for(\.\w+)|\/for}/g,"").trim();l.forEach(r=>{a+=c.replace(/labelName/g,r)})}return s.replace(i,a).trim()}const n=t.replace(/\{\w+\}/g,s=>{let l=s.replace(/{|}/g,"");return e[l]});return o(n,e.label)}function g(e,t){function o(c){return c.match(/post-\d{1,}/g)[0].replace("post-","")}function n(c){let r=c,u="";for(var m=0;m<r.length;m++)r[m].rel=="alternate"&&(u=r[m].href);return u}function s(c){return c.replace(/<[^>]*>?/g,"")}function l(c){const r=s(c);return r.length>t.summaryLength?r.substr(0,t.summaryLength)+"...":r}function i(c){let r=document.createElement("div");r.innerHTML=c;let u=r.querySelector("img");return console.log(u),u?u.getAttribute("src"):t.dftImg||"#noImageFounded"}const a=e.content?e.content.$t:e.summary.$t;return{id:o(e.id.$t),title:e.title?e.title.$t:"No title",thumbnail:e.media$thumbnail?e.media$thumbnail.url.replace(/s\B\d{2,4}(-?w\d{2,4})?-c/,t.resimg?t.resimg:"s200"):i(a),label:e.category?e.category.map(c=>c.term):"",link:n(e.link),url:n(e.link),content:a,summary:l(a),datePost:new Date(e.published.$t).toLocaleDateString(),postUpdate:new Date(e.updated.$t).toLocaleDateString(),datePostIso8601:e.published.$t,authorName:e.name?e.name.$t:"Unknown",authorUri:e.uri?e.uri.$t:"#noProfileUrl"}}function b(e,t,o,n){let s=document.createElement("script"),l=`${e}/feeds/posts/${t?"default/-/"+t:"default"}?alt=json-in-script&max-results=${n}&callback=${o}`;return s.src=l,s}function y(e,t,o,n){return new Promise(s=>{const l=b(e,t,o,n);document.body.appendChild(l),window[o]=a=>{s(a.feed.entry||!1)},l.remove()})}class x{constructor(t,o){this.config=t||{},this.template="",this.custom=o||{},this.mode={},this.init()}#e(){return'<div class="default-card text-left"><picture class="mb-2 block"><a href="{url}" class="block"><img src="{thumbnail}" class="rounded w-full h-36 object-cover"></a></picture><h2 class="text-lg font-bold text-slate-700">{title}</h2><div class="mb-2"><a class="text-xs font-semibold opacity-75" href="{authorUri}">{authorName}</a> - <time class="text-xs font-semibold opacity-75" datetime="{datePostIso8601}">{datePost}</ti></div><p class="text-slate-500 text-sm mb-2">{summary}</p> <div class="flex items-center flex-wrap gap-2 mt-2">{for.label <a href="/search/label/labelName" class="px-2 py-1 bg-slate-100 font-bold text-slate-800 rounded text-xs">labelName</a> /for}</div> <a href="{url}" class="bg-indigo-500 text-white hover:bg-indigo-700 text-xs uppercase duration-150 py-2 px-2 font-semibold rounded inline-block mt-2">More details</a></div>'}setTemplate(t){this.template=t}#t(){return this.template||this.#e()}getMode(t,o){for(var n=0,s=t.length;n<s;n++)if(t[n].b==o)return t[n]}init(){const t=document.querySelectorAll(".bs-wrapper");if(t.length==0){console.warn("Warning: The node elements is not founded, please check if the node element passing as parameter exist en your HTML document");return}let o=f((n,s)=>{n.forEach(l=>{let i=l.target;if(l.isIntersecting){const a=i.querySelector(".bs-container"),{bsCfg:c}=i.dataset,r=d(c),u=window.location.protocol+"//"+window.location.hostname;y(r.homeUrl||u,r.label,"bsFn"+(i.index+1),r.results||6).then(m=>{a.innerHTML="",m.forEach(w=>{const h=g(w,this.config);a.innerHTML+=this.custom.customItem?this.custom.customItem.call(this,h,r.style):p(h,this.#t())}),i.removeAttribute("data-bs-cfg"),this.custom.customWrapper&&this.custom.customWrapper.call(this,i,a,r.style||"",r.mode||"")}),o.unobserve(i)}})});t.forEach((n,s)=>{n.index=s,o.observe(n)})}}return x});
